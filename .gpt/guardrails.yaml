version: 1
filename_policy:
  allow:
    - regex: '^docs/(?:\\d{2}_[A-Z][A-Za-z0-9]*(?:_[A-Z][A-Za-z0-9]*)*\\.md)$'
    - regex: '^docs/(?:Requirements|templates)/.+\\.md$'
    - regex: '^docs/Docs_Index\\.md$'
    - regex: '^docs/Id_Registry\\.md$'
    - regex: '^Database_erd_mermaid\\.md$'
    - regex: '^tools/.*'
    - regex: '^\\.github/.*'
    - regex: '^\\.vale/.*'
    - regex: '^\\.markdownlint\\.yaml$'
    - regex: '^Makefile$'
  deny:
    - regex: '^docs/Glossary\\.md$'
front_matter:
  required: true
  schema: /tools/frontmatter.schema.json
protected_paths:
  - path: docs/Docs_Index.md
    required_label: approved-adr
  - path: docs/Id_Registry.md
    required_label: approved-adr
  - path: docs/02_Glossary.md
    required_label: approved-adr
  - path: docs/03_Style_Guide.md
    required_label: approved-adr
  - path: docs/03a_Naming_And_Filenames.md
    required_label: approved-adr
  - path: docs/35_Templates_Index.md
    required_label: approved-adr
  - path: docs/04_GPT5_Working_Agreement.md
    required_label: approved-adr
  - path: TODO.md
    required_label: maintainer-override
validators:
  pre_commit:
    - command: ['make', 'docs-validate']
      on_failure: refuse
  lint:
    - command: ['markdownlint', 'docs']
      optional: true
refuse_conditions:
  - description: Delete or truncate protected documents
    match:
      action: delete
      paths:
        - glob: 'docs/*.md'
  - description: Attempt to edit files outside allowed regex without maintainer approval
    match:
      action: modify
      paths:
        - glob: '*'
